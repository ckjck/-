 #include <reg52.h>
 #define uchar unsigned char
 #define uint unsigned int    //宏定义
 sbit KEY=P3^7;             //定义画面切换按键
 uchar KY;                    //KY作用在后面说明
 uchar disp;                  //显示汉字指针
 uchar pic=0,num=0;           //pic为按键次数；num为中断次数
uchar code love[] = 
                    {
                     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
                     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					 0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
					 0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,
					 0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
					 0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,
					 0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
					 0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,
					 0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
					 0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,
					 0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
					 0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,
					 0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
					 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
					 };
uchar code loveyou[] = 
                       {
					    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
                        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,
						0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
						0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,
						0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
						0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
						};
uchar code hehe[] = 
                    {
					 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
                     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					 0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,
					 0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
					 0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,
					 0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
					 0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,
					 0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
					 0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,
					 0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
					 0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,
					 0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
					 0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,
					 0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
					 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
					 };


unsigned char code hanzi[] = {

0x04,0x00,0x04,0x00,0xF4,0x01,0x54,0xFD,0x54,0x55,0xFF,0x55,0x54,0x55,0x54,0x55,
0x54,0x55,0xFF,0x55,0x54,0x55,0x54,0xFD,0xF4,0x01,0x04,0x00,0x04,0x00,0x00,0x00,	//曹

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	//空格

0x04,0x20,0x84,0x60,0x84,0x20,0xFC,0x1F,0x84,0x10,0x84,0x10,0x00,0x00,0xE4,0x0F,
0x24,0x04,0x24,0x04,0xE4,0x4F,0x04,0x80,0xFC,0x7F,0x04,0x00,0x04,0x00,0x00,0x00,	//珂

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	//空格

0x00,0x82,0x08,0x42,0x08,0x31,0x88,0x00,0x48,0x00,0x28,0x10,0x18,0x60,0xFF,0x07,
0x18,0x10,0x28,0x60,0x48,0x00,0x88,0x00,0x08,0x11,0x08,0xE2,0x00,0x02,0x00,0x00	  //杰

}	;							

unsigned char code hanzi1[] = 				 //祝飞兆杯取得圆满成功
{

/*---转换字符 祝 ---*/
0x08,0x02,0x08,0x01,0x89,0x00,0xEE,0xFF,0x98,0x80,0x00,0x43,0x7E,0x20,0x42,0x18,
0xC2,0x07,0x42,0x00,0x42,0x00,0xC2,0x3F,0x42,0x40,0x7E,0x40,0x00,0x78,0x00,0x00,


/*---转换字符 飞 ---*/
0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,
0x02,0x00,0xFE,0x03,0x40,0x0C,0xA0,0x10,0x10,0x21,0x08,0x42,0x00,0xF0,0x00,0x00,


/*---转换字符 兆 ---*/
0x00,0x00,0x04,0x84,0x08,0x42,0x30,0x21,0x80,0x18,0xFF,0x07,0x00,0x00,0x00,0x00,
0x00,0x00,0xFF,0x3F,0x40,0x40,0x90,0x40,0x08,0x41,0x04,0x42,0x00,0x78,0x00,0x00,


/*---转换字符 杯 ---*/
0x10,0x04,0x10,0x03,0xD0,0x00,0xFF,0xFF,0x50,0x00,0x90,0x04,0x04,0x02,0x04,0x01,
0x84,0x00,0xE4,0xFF,0x1C,0x00,0x84,0x00,0x04,0x01,0x04,0x06,0x04,0x00,0x00,0x00,

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*---转换字符 取 ---*/
0x02,0x08,0x02,0x18,0xFE,0x0F,0x92,0x08,0x92,0x08,0x92,0x04,0xFE,0xFF,0x02,0x04,
0x06,0x84,0xFC,0x40,0x04,0x27,0x04,0x18,0x04,0x27,0xFC,0x40,0x00,0x80,0x00,0x00,


/*---转换字符 得 ---*/
0x00,0x02,0x10,0x01,0x88,0x00,0xC4,0xFF,0x33,0x00,0x00,0x02,0xBE,0x0A,0xAA,0x12,
0xAA,0x02,0xAA,0x42,0xAA,0x82,0xAA,0x7F,0xBE,0x02,0x80,0x02,0x00,0x02,0x00,0x00,

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*---转换字符 圆 ---*/
0x00,0x00,0xFE,0xFF,0x02,0x40,0x82,0x4F,0xBA,0x60,0xAA,0x50,0xAA,0x48,0xAA,0x46,
0xAA,0x48,0xAA,0x50,0xBA,0x60,0x82,0x4F,0x02,0x40,0xFE,0xFF,0x00,0x00,0x00,0x00,


/*---转换字符 满 ---*/
0x10,0x04,0x60,0x04,0x02,0x7E,0x8C,0x01,0x00,0x00,0x24,0xFF,0x24,0x11,0x2F,0x09,
0xE4,0x07,0x24,0x19,0x24,0x09,0xE4,0x07,0x2F,0x49,0x24,0x91,0x24,0x7F,0x00,0x00,


/*---转换字符 成 ---*/
0x00,0x80,0x00,0x60,0xF8,0x1F,0x88,0x00,0x88,0x10,0x88,0x20,0x88,0x1F,0x08,0x80,
0x08,0x40,0xFF,0x21,0x08,0x16,0x09,0x18,0x0A,0x26,0xC8,0x41,0x08,0xF8,0x00,0x00,


/*---转换字符 功 ---*/
0x08,0x10,0x08,0x30,0x08,0x10,0xF8,0x1F,0x08,0x08,0x08,0x88,0x08,0x48,0x10,0x30,
0x10,0x0E,0xFF,0x01,0x10,0x40,0x10,0x80,0x10,0x40,0xF0,0x3F,0x00,0x00,0x00,0x00

}	;		


unsigned char code gou[] =
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x02,0x00,0x04,0x00,0x08,0x00,0x18,
0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x30,
0x00,0x10,0x00,0x18,0x00,0x0C,0x00,0x04,
0x00,0x06,0x00,0x03,0x00,0x01,0x80,0x01,
0xC0,0x00,0x40,0x00,0x60,0x00,0x20,0x00,
0x10,0x00,0x18,0x00,0x08,0x00,0x0C,0x00,
0x06,0x00,0x02,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};


/*****函数声明*****/
//void display1(void);
//void display2(void);
//void display3(void);
//void display4(void);
/*****n（us）延时子程序*****/
void DelayUs(uint N)
{
uint x;
for(x=0; x<=N;x++);
}



/*****显示子程序1（汉字）*****/
/*void display1(void)
{
uchar i;
if(num>10){disp++;num=0;}     
if(disp>2)disp=0;
DelayUs(5200);                //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
for(i=0;i<64;i++)
{
P0=~hanzi[disp*128+i*2];
P2=~hanzi[disp*128+i*2+1];
DelayUs(100);
}
}	*/ 

void display1(void)			 //显示汉字" 曹珂杰 "
{
uchar i;
//if(num>10){disp++;num=0;}  
//if(disp>2)disp=0;
DelayUs(5200);
for(i=0;i<64;i++)
{
P0=~hanzi[i*2];
P2=~hanzi[i*2+1];
DelayUs(100);
}
}					


	/*****显示子程序2  祝飞兆杯 取得 圆满成功*****/
void display2(void)
{
uchar i,disp;
if(num>3){disp++;num=0;}     	 //10个汉字，2个空格，分为3次显示完（每次显示4个），每中断20，即摇晃10次切换
if(disp>2)disp=0;
DelayUs(5200);

for(i=0;i<64;i++)
{
P0=~hanzi1[disp*128+i*2];
P2=~hanzi1[disp*128+i*2+1];
DelayUs(120);
}
}
/*****显示子程序3（LOVE）*****/
void display3(void)
{
uchar i;
DelayUs(5200);
for(i=0;i<64;i++)
{
P0=~love[i*2];
P2=~love[i*2+1];
DelayUs(120);
}
}
/*****显示子程序4（心形图案）*****/
void display4(void)
{
uchar i;
DelayUs(5200);
for(i=0;i<64;i++)
{
P0=~loveyou[i*2];
P2=~loveyou[i*2+1];
DelayUs(120);
}
}

		

/*****显示子程序5（呵呵o(∩_∩)o图案）*****/
void display5(void)
{
uchar i;
DelayUs(5200);
for(i=0;i<64;i++)
{
P0=~hehe[i*2];
P2=~hehe[i*2+1];
DelayUs(120);
}
}


/*****显示子程序6  勾*****/
void display6(void)
{
uchar i;
DelayUs(5200);
for(i=0;i<64;i++)
{
P0=~gou[i*2];
P2=~gou[i*2+1];
DelayUs(120);
}
}

/*****主函数*****/
void main(void)
{
IT0=1;
EX0=1;
EA=1;         //开中断，下降沿中断
//KY=1;
KEY=1;
KY=0;
while(1)       //主程序中只检测按键
{
if(KEY==0)     //画面切换键按下
{
DelayUs(10000);//按键去抖
if(KEY==0);
pic++;
DelayUs(300000);
}
if(pic>5)pic=0;
}
}

/*****中断服务程序*****/
void intersvr0(void) interrupt 0 using 1
{
KY=~KY;               //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
if(KY==0)
{
num++;                //计算中断次数
switch(pic)           //选择画面
{
case 0:{display1();}break;
case 1:{display2();}break;
case 2:{display3();}break;
case 3:{display4();}break;
case 4:{display5();}break;
case 5:{display6();}break;
default:{display1();}
}
}
}
/*****END*****/

